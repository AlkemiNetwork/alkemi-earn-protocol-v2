import { SolcOutput } from './solc-api';
import { Version } from './version';
import { StorageLayout } from './storage';
import { LinkReference } from './link-refs';
import { UpgradesError } from './error';
import { SrcDecoder } from './src-decoder';
export declare type Validation = Record<string, ValidationResult>;
export interface ValidationResult {
    version?: Version;
    inherit: string[];
    libraries: string[];
    linkReferences: LinkReference[];
    errors: ValidationError[];
    layout: StorageLayout;
}
declare type ValidationError = ValidationErrorConstructor | ValidationErrorOpcode | ValidationErrorWithName;
interface ValidationErrorBase {
    src: string;
}
interface ValidationErrorWithName extends ValidationErrorBase {
    name: string;
    kind: 'state-variable-assignment' | 'state-variable-immutable' | 'external-library-linking' | 'struct-definition' | 'enum-definition';
}
interface ValidationErrorConstructor extends ValidationErrorBase {
    kind: 'constructor';
    contract: string;
}
interface ValidationErrorOpcode extends ValidationErrorBase {
    kind: 'delegatecall' | 'selfdestruct';
}
export interface ValidationOptions {
    unsafeAllowCustomTypes?: boolean;
    unsafeAllowLinkedLibraries?: boolean;
}
export declare function withValidationDefaults(opts: ValidationOptions): Required<ValidationOptions>;
export declare function validate(solcOutput: SolcOutput, decodeSrc: SrcDecoder): Validation;
export declare function getContractVersion(validation: Validation, contractName: string): Version;
export declare function getStorageLayout(validation: Validation, version: Version): StorageLayout;
export declare function getUnlinkedBytecode(validation: Validation, bytecode: string): string;
export declare function assertUpgradeSafe(validation: Validation, version: Version, opts: ValidationOptions): void;
export declare class ValidationErrors extends UpgradesError {
    readonly errors: ValidationError[];
    constructor(contractName: string, errors: ValidationError[]);
}
export declare function getErrors(validation: Validation, version: Version): ValidationError[];
export declare function isUpgradeSafe(validation: Validation, version: Version): boolean;
export {};
//# sourceMappingURL=validate.d.ts.map